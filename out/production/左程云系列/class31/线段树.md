# 一、线段树
**核心字段**
```java
private int[] arr; //原始元素的数组，可选
private int[] sum; //业务数组，根据业务需求设置
private int[] lazy; //业务数组对应的懒数组
private int[] change; //update对应的懒数组 
private boolean[] update; //是否对该位置进行update
```
其中这些数组的大小都为原始数组的四倍

## 操作逻辑
**线段树的操作大概分为：业务操作、update操作以及query操作**

**它们都需要传入操作范围(L,R)  业务节点及对应范围(l,r,rt)**

思路如下：\
    1. 判断当前[L,R]是否包含[l,r]，若包含则直接更新当前业务节点，“懒”住此操作并返回\
    2. 若不包含则求出当前业务节点范围的中点mid，可以得到左孩子\
范围大小mid-l+1,和右孩子范围大小r-mid\
    3. 下发任务，将之前该节点“懒”住的操作分发给左右孩子，让他们及时更新成当前状态\
    4. 根据二分法，递归左右孩子\
    5. 利用递归的结果对当前业务节点进行更新

## 常见问题
在测试时经常会报错数组越界，我们可以从以下方面入手：
1. 检查业务数组长度是否为(原数组长度+1)<<2
2. 检查调用业务方法时(update、query等)指定的rt及对应范围
3. 检查调用业务方法时的参数传入顺序和设想的是否一致


